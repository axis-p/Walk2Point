# Walk2Point - iOS画面設計書

## 1. 画面構成概要

### 1.1 画面一覧

| No | 画面名 | 画面ID | 概要 |
|----|--------|--------|------|
| 1 | スプラッシュ画面 | SPLASH | アプリ起動時のロゴ表示 |
| 2 | オンボーディング画面 | ONBOARDING | 初回起動時のアプリ説明 |
| 3 | ログイン画面 | LOGIN | メールアドレス/パスワード入力 |
| 4 | 会員登録画面 | REGISTER | 新規アカウント作成 |
| 5 | パスワードリセット画面 | PASSWORD_RESET | パスワード再設定 |
| 6 | ホーム画面 | HOME | ダッシュボード/歩数表示 |
| 7 | ポイント画面 | POINTS | ポイント残高/履歴 |
| 8 | リワード画面 | REWARDS | 動画広告/ボーナス獲得 |
| 9 | ミッション画面 | MISSIONS | デイリー/ウィークリータスク |
| 10 | 交換画面 | EXCHANGE | ポイント交換申請 |
| 11 | 設定画面 | SETTINGS | アカウント/通知設定 |
| 12 | プロフィール画面 | PROFILE | ユーザー情報編集 |
| 13 | 履歴画面 | HISTORY | 歩数/ポイント/交換履歴 |
| 14 | ヘルプ画面 | HELP | FAQ/お問い合わせ |
| 15 | 利用規約画面 | TERMS | 規約・ポリシー表示 |

### 1.2 画面遷移図

```
┌─────────────┐
│スプラッシュ │
└──────┬──────┘
       │
       ▼
┌─────────────┐     ┌─────────────┐
│オンボーディ │────▶│  ログイン   │
│   ング      │     └──────┬──────┘
└─────────────┘            │
                          │
       ┌──────────────────┼──────────────────┐
       │                  │                  │
       ▼                  ▼                  ▼
┌─────────────┐    ┌─────────────┐   ┌─────────────┐
│ 会員登録    │    │パスワード   │   │   ホーム    │
│            │    │  リセット   │   │ (Tab Root)  │
└─────────────┘    └─────────────┘   └──────┬──────┘
                                            │
    ┌───────────────────────────────────────┼───────────────────────────────────────┐
    │                                       │                                       │
    ▼                   ▼                   ▼                   ▼                   ▼
┌────────┐        ┌────────┐        ┌────────┐        ┌────────┐        ┌────────┐
│ ホーム │        │ポイント│        │リワード│        │ミッション      │設定    │
│  Tab   │        │  Tab   │        │  Tab   │        │  Tab   │        │  Tab   │
└────────┘        └────────┘        └────────┘        └────────┘        └────────┘
```

## 2. 共通UI仕様

### 2.1 デザインシステム

#### カラーパレット
```
Primary Color:    #4CAF50 (Green)
Secondary Color:  #2196F3 (Blue)
Accent Color:     #FFC107 (Amber)
Background:       #F5F5F5 (Light Gray)
Surface:          #FFFFFF (White)
Error:            #F44336 (Red)
Text Primary:     #212121
Text Secondary:   #757575
```

#### タイポグラフィ
```
Title Large:   28sp, Bold
Title Medium:  22sp, SemiBold
Title Small:   18sp, SemiBold
Body Large:    16sp, Regular
Body Medium:   14sp, Regular
Body Small:    12sp, Regular
Label:         12sp, Medium
```

#### スペーシング
```
xs: 4px
sm: 8px
md: 16px
lg: 24px
xl: 32px
xxl: 48px
```

### 2.2 共通コンポーネント

#### ナビゲーションバー
- 高さ: 56px
- 背景色: Primary Color
- タイトル: 白色、Title Medium
- 戻るボタン: iOS標準

#### タブバー
- 高さ: 49px (iOS標準)
- アイコンサイズ: 24x24px
- ラベル: 10sp
- 選択時: Primary Color
- 非選択時: #757575

#### ボタン
- 高さ: 48px
- 角丸: 8px
- プライマリ: 背景Primary Color、白文字
- セカンダリ: 枠線Primary Color、Primary Color文字
- 無効時: 背景#E0E0E0、#9E9E9E文字

#### 入力フィールド
- 高さ: 56px
- 枠線: 1px #E0E0E0
- フォーカス時: Primary Color
- エラー時: Error Color

## 3. バナー広告配置戦略

### 3.1 広告配置の基本方針

#### 収益性とUXのバランス
- **常時表示画面**: ホーム、ポイント、履歴（滞在時間が長い）
- **下部固定配置**: タブバーの上、コンテンツの邪魔にならない位置
- **リフレッシュレート**: 30-60秒で自動更新（収益最大化）
- **スマートバナー**: 画面サイズに自動対応

#### 広告非表示画面（UX優先）
- ログイン/会員登録画面（コンバージョン重視）
- 交換申請画面（重要な操作）
- エラー画面（ユーザビリティ優先）

### 3.2 画面別広告配置

| 画面 | バナー広告 | インタースティシャル | リワード動画 | 優先度 |
|------|-----------|------------------|-------------|--------|
| ホーム | ○ (常時) | × | × | 高 |
| ポイント | ○ (常時) | × | × | 高 |
| リワード | ○ (上部) | × | ○ | 高 |
| ミッション | ○ (下部) | × | × | 中 |
| 履歴 | ○ (常時) | × | × | 中 |
| 設定 | × | × | × | 低 |
| 交換 | × | ○ (完了時) | × | 低 |

### 3.3 収益最適化のポイント

1. **高CPMを狙う配置**
   - ファーストビューに近い位置
   - ユーザーの視線が集まる場所
   - スクロール不要なエリア

2. **クリック誤操作の防止**
   - ボタンから十分な距離を確保
   - 広告とコンテンツの明確な分離
   - 適切なパディング設定

## 4. 各画面詳細設計

### 4.1 スプラッシュ画面 (SPLASH)

#### レイアウト
```
┌─────────────────────────┐
│                         │
│                         │
│        [ロゴ]           │
│     Walk2Point          │
│                         │
│    [ローディング]        │
│                         │
│                         │
└─────────────────────────┘
```

#### 仕様
- 表示時間: 2秒
- アニメーション: ロゴフェードイン
- 背景: グラデーション（Primary → Secondary）
- 自動遷移: 認証状態により分岐
  - 未ログイン → オンボーディング/ログイン
  - ログイン済み → ホーム

### 4.2 オンボーディング画面 (ONBOARDING)

#### レイアウト
```
┌─────────────────────────┐
│     [スキップ]          │
├─────────────────────────┤
│                         │
│     [イラスト]           │
│                         │
│     タイトル             │
│     説明文              │
│                         │
│   ● ○ ○                │
│                         │
│     [次へ]              │
└─────────────────────────┘
```

#### ページ構成
1. **ページ1: 歩いてポイントを貯めよう**
   - イラスト: 歩いている人
   - 説明: 日常の歩数がポイントに変換されます

2. **ページ2: 様々な方法でボーナス獲得**
   - イラスト: コイン・ボーナスアイコン
   - 説明: 動画視聴、ゲームDL、SNSフォローでボーナス

3. **ページ3: ポイントを交換しよう**
   - イラスト: ギフトカード
   - 説明: 貯まったポイントをAmazonギフト券などに交換

### 4.3 ログイン画面 (LOGIN)

#### レイアウト
```
┌─────────────────────────┐
│      Walk2Point         │
├─────────────────────────┤
│                         │
│     [ロゴ]              │
│                         │
│  ┌───────────────────┐  │
│  │ メールアドレス      │  │
│  └───────────────────┘  │
│                         │
│  ┌───────────────────┐  │
│  │ パスワード         │  │
│  └───────────────────┘  │
│                         │
│  [パスワードを忘れた方]   │
│                         │
│  ┌───────────────────┐  │
│  │    ログイン        │  │
│  └───────────────────┘  │
│                         │
│  ─────── または ───────  │
│                         │
│  ┌───────────────────┐  │
│  │   新規会員登録     │  │
│  └───────────────────┘  │
│                         │
└─────────────────────────┘
```

#### 入力バリデーション
- メールアドレス: RFC5322準拠
- パスワード: 8文字以上
- エラー表示: フィールド下部に赤文字

### 4.4 ホーム画面 (HOME)

#### レイアウト
```
┌─────────────────────────┐
│  今日の歩数   [設定]     │
├─────────────────────────┤
│                         │
│       12,345            │
│        歩               │
│    ━━━━━━━━━━━         │
│     60% / 20,000       │
│                         │
│  獲得ポイント: 12P       │
│                         │
├─────────────────────────┤
│  [週間グラフ]           │
│   月 火 水 木 金 土 日   │
│   ▁ ▃ ▅ ▇ ▅ ▃ ▁       │
├─────────────────────────┤
│  本日のミッション        │
│  □ 10,000歩達成        │
│  ☑ ログインボーナス     │
│  □ 動画視聴 (0/3)      │
├─────────────────────────┤
│  [バナー広告]           │
├─────────────────────────┤
│ [ホーム][ポイント][リワード][ミッション][設定] │
└─────────────────────────┘
```

#### 機能
- プルトゥリフレッシュで歩数同期
- 円形プログレスバーで進捗表示
- HealthKit自動同期（バックグラウンド）
- ミッション進捗のリアルタイム更新

### 4.5 ポイント画面 (POINTS)

#### レイアウト
```
┌─────────────────────────┐
│      ポイント           │
├─────────────────────────┤
│                         │
│    現在の残高           │
│     1,234 P            │
│                         │
│  ┌───────────────────┐  │
│  │   ポイント交換     │  │
│  └───────────────────┘  │
│                         │
├─────────────────────────┤
│  獲得履歴               │
├─────────────────────────┤
│  今日                   │
│  歩数ボーナス    +12P   │
│  ログイン        +1P    │
│  動画視聴        +5P    │
├─────────────────────────┤
│  昨日                   │
│  歩数ボーナス    +15P   │
│  連続ログイン    +10P   │
├─────────────────────────┤
│  [もっと見る]           │
├─────────────────────────┤
│  [バナー広告]           │
└─────────────────────────┘
```

### 4.6 リワード画面 (REWARDS)

#### レイアウト
```
┌─────────────────────────┐
│      リワード           │
├─────────────────────────┤
│  デイリーボーナス        │
├─────────────────────────┤
│  ┌───────────────────┐  │
│  │ 🎬 動画を見て      │  │
│  │    +5ポイント      │  │
│  │   残り: 3回        │  │
│  └───────────────────┘  │
├─────────────────────────┤
│  特別オファー           │
├─────────────────────────┤
│  ┌───────────────────┐  │
│  │ 📱 ゲームDL       │  │
│  │   +50ポイント     │  │
│  │  [インストール]    │  │
│  └───────────────────┘  │
│  ┌───────────────────┐  │
│  │ 📱 アプリDL       │  │
│  │   +30ポイント     │  │
│  │  [インストール]    │  │
│  └───────────────────┘  │
├─────────────────────────┤
│  SNSフォロー (初回限定)  │
├─────────────────────────┤
│  ┌───────────────────┐  │
│  │ 🐦 Twitter        │  │
│  │   +20ポイント     │  │
│  │   [フォロー]       │  │
│  └───────────────────┘  │
│  ┌───────────────────┐  │
│  │ 📷 Instagram     │  │
│  │   +15ポイント     │  │
│  │   [フォロー]       │  │
│  └───────────────────┘  │
│  ┌───────────────────┐  │
│  │ 💬 LINE          │  │
│  │   +15ポイント     │  │
│  │   [友達追加]       │  │
│  └───────────────────┘  │
└─────────────────────────┘
```

### 4.7 ミッション画面 (MISSIONS)

#### レイアウト
```
┌─────────────────────────┐
│     ミッション          │
├─────────────────────────┤
│  [デイリー][ウィークリー] │
├─────────────────────────┤
│  デイリーミッション      │
├─────────────────────────┤
│  ☑ ログイン        1P  │
│  □ 5,000歩達成    5P  │
│  □ 10,000歩達成  10P  │
│  □ 15,000歩達成  15P  │
│  □ 動画視聴×1     5P  │
│  □ 動画視聴×3    15P  │
├─────────────────────────┤
│  連続ログインボーナス    │
│  現在: 5日連続          │
│  次回: 7日で+10P        │
│  ○○○○○○○           │
├─────────────────────────┤
│  月間チャレンジ         │
│  300,000歩達成         │
│  進捗: 156,789/300,000  │
│  ━━━━━━━━━━          │
│  報酬: 100P            │
└─────────────────────────┘
```

### 4.8 交換画面 (EXCHANGE)

#### レイアウト
```
┌─────────────────────────┐
│     ポイント交換        │
├─────────────────────────┤
│  現在の残高: 1,234P     │
├─────────────────────────┤
│  交換先を選択           │
├─────────────────────────┤
│  ┌───────────────────┐  │
│  │ Amazonギフト券    │  │
│  │ 最小: 500P        │  │
│  │ レート: 1P = 1円  │  │
│  └───────────────────┘  │
│  ┌───────────────────┐  │
│  │ PayPayポイント    │  │
│  │ 最小: 500P        │  │
│  │ (準備中)          │  │
│  └───────────────────┘  │
│  ┌───────────────────┐  │
│  │ 楽天ポイント      │  │
│  │ 最小: 500P        │  │
│  │ (準備中)          │  │
│  └───────────────────┘  │
├─────────────────────────┤
│  交換履歴               │
├─────────────────────────┤
│  2025/01/15             │
│  Amazon 500円  -500P    │
│  申請中                 │
├─────────────────────────┤
│  2024/12/20             │
│  Amazon 1000円 -1000P   │
│  完了                   │
└─────────────────────────┘
```

#### 交換フロー
1. 交換先選択
2. 金額入力（500P単位）
3. 確認画面
4. メール認証
5. 申請完了

### 4.9 設定画面 (SETTINGS)

#### レイアウト
```
┌─────────────────────────┐
│       設定              │
├─────────────────────────┤
│  アカウント             │
├─────────────────────────┤
│  > プロフィール編集      │
│  > メールアドレス変更    │
│  > パスワード変更       │
├─────────────────────────┤
│  通知設定               │
├─────────────────────────┤
│  プッシュ通知      [ON] │
│  デイリーリマインダー [ON]│
│  時刻設定        20:00  │
├─────────────────────────┤
│  データ同期             │
├─────────────────────────┤
│  HealthKit連携    [ON]  │
│  バックグラウンド更新 [ON]│
├─────────────────────────┤
│  その他                 │
├─────────────────────────┤
│  > ヘルプ              │
│  > 利用規約            │
│  > プライバシーポリシー  │
│  > お問い合わせ         │
│  > バージョン情報       │
├─────────────────────────┤
│  > ログアウト           │
│  > 退会                │
└─────────────────────────┘
```

## 5. エラー処理

### 5.1 エラー表示パターン

#### トースト通知
- 軽微なエラー
- 3秒間表示
- 位置: 画面上部

#### モーダルダイアログ
- 重要なエラー
- ユーザーアクション必要
- OKボタンで閉じる

#### インライン表示
- 入力エラー
- フィールド下部に赤文字
- リアルタイム表示

### 5.2 主要エラーメッセージ

| エラー種別 | メッセージ | 対処 |
|-----------|----------|------|
| ネットワーク | 通信エラーが発生しました | リトライボタン表示 |
| 認証 | ログインが必要です | ログイン画面へ遷移 |
| 歩数同期 | 歩数データを取得できません | HealthKit設定確認 |
| ポイント不足 | ポイントが不足しています | ポイント獲得画面へ |
| 広告読込失敗 | 広告を表示できません | 自動リトライ |

## 6. アニメーション仕様

### 6.1 画面遷移
- Push/Pop: iOS標準スライド
- Modal: 下からスライドアップ
- Tab切替: フェード

### 6.2 コンポーネント
- ボタンタップ: Scale 0.95
- リスト選択: 背景色変更
- プログレスバー: スムーズアニメーション
- ポイント獲得: 数字カウントアップ

### 6.3 ローディング
- スピナー: Primary Color
- スケルトンスクリーン: リスト表示時
- プルトゥリフレッシュ: iOS標準

## 7. アクセシビリティ

### 7.1 VoiceOver対応
- 全要素にaccessibilityLabel設定
- 重要度に応じたaccessibilityHint
- ボタンのrole明確化

### 7.2 文字サイズ
- Dynamic Type対応
- 最小フォントサイズ: 12sp
- 最大フォントサイズ: システム設定準拠

### 7.3 カラーコントラスト
- WCAG AA準拠
- 通常テキスト: 4.5:1以上
- 大きいテキスト: 3:1以上

## 8. パフォーマンス要件

### 8.1 起動時間
- コールドスタート: 3秒以内
- ホットスタート: 1秒以内

### 8.2 画面遷移
- 遷移アニメーション: 300ms
- データ取得: 2秒以内
- タップレスポンス: 100ms以内

### 8.3 メモリ使用量
- 通常時: 100MB以下
- ピーク時: 200MB以下

---
*Document Version: 1.0*
*Last Updated: 2025-09-26*